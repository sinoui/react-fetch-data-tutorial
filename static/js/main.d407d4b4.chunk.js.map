{"version":3,"sources":["ArticleList.js","QueryForm.js","LoadingIndicator.js","useDataApi.js","App.js","index.js"],"names":["ArticleList","props","articles","react_default","a","createElement","map","article","key","objectID","href","url","title","author","QueryForm","_useState","useState","_useState2","Object","slicedToArray","query","setQuery","onSubmit","event","preventDefault","handleSubmit","type","value","onChange","target","LoadingIndicator","dataFetchReducer","state","action","objectSpread","isError","isLoading","data","payload","useDataApi","initialUrl","initialData","_useReducer","useReducer","_useReducer2","dispatch","setUrl","useEffect","didCancel","_ref","asyncToGenerator","regenerator_default","mark","_callee","result","wrap","_context","prev","next","axios","sent","t0","stop","apply","this","arguments","fetchData","doFetch","App","_useDataApi","hits","className","src_QueryForm","concat","src_LoadingIndicator","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.d407d4b4.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport default function ArticleList(props) {\r\n  const { articles } = props;\r\n\r\n  return (\r\n    <ul>\r\n      {articles.map((article) => (\r\n        <li key={article.objectID}>\r\n          <a href={article.url}>\r\n            {article.title}（作者：{article.author}）\r\n          </a>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\n\r\nfunction QueryForm(props) {\r\n  const [query, setQuery] = useState('react');\r\n\r\n  return (\r\n    <form\r\n      onSubmit={(event) => {\r\n        event.preventDefault();\r\n        props.handleSubmit(query);\r\n      }}\r\n    >\r\n      <input\r\n        type=\"text\"\r\n        value={query}\r\n        onChange={(event) => setQuery(event.target.value)}\r\n      />\r\n      <input type=\"submit\" value=\"查询\" />\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default QueryForm;\r\n","import React from 'react';\r\n\r\nfunction LoadingIndicator() {\r\n  return <div>加载中...</div>;\r\n}\r\n\r\nexport default LoadingIndicator;\r\n","import { useState, useEffect, useReducer } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction dataFetchReducer(state, action) {\r\n  switch (action.type) {\r\n    case 'FETCH_INIT':\r\n      return {\r\n        ...state,\r\n        isError: false,\r\n        isLoading: true,\r\n      };\r\n    case 'FETCH_SUCCESS':\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        isError: false,\r\n        data: action.payload,\r\n      };\r\n    case 'FETCH_FAILURE':\r\n      return {\r\n        ...state,\r\n        isError: true,\r\n        isLoading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction useDataApi(initialUrl, initialData) {\r\n  const [state, dispatch] = useReducer(dataFetchReducer, {\r\n    isLoading: false,\r\n    isError: false,\r\n    data: initialData,\r\n  });\r\n  const [url, setUrl] = useState(initialUrl);\r\n\r\n  useEffect(() => {\r\n    let didCancel = false;\r\n    const fetchData = async () => {\r\n      dispatch({ type: 'FETCH_INIT' });\r\n\r\n      try {\r\n        const result = await axios(url);\r\n\r\n        if (!didCancel) {\r\n          dispatch({ type: 'FETCH_SUCCESS', payload: result.data });\r\n        }\r\n      } catch (error) {\r\n        if (!didCancel) {\r\n          dispatch({ type: 'FETCH_FAILURE' });\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    return () => {\r\n      didCancel = true;\r\n    };\r\n  }, [url]);\r\n\r\n  const doFetch = (url) => {\r\n    setUrl(url);\r\n  };\r\n\r\n  return { ...state, doFetch };\r\n}\r\n\r\nexport default useDataApi;\r\n","import React from 'react';\r\nimport ArticleList from './ArticleList';\r\nimport QueryForm from './QueryForm';\r\nimport LoadingIndicator from './LoadingIndicator';\r\nimport useDataApi from './useDataApi';\r\n\r\nfunction App() {\r\n  const { data, isLoading, isError, doFetch } = useDataApi(\r\n    '//hn.algolia.com/api/v1/search?query=react',\r\n    {\r\n      hits: [],\r\n    },\r\n  );\r\n\r\n  const handleSubmit = (query) => {\r\n    doFetch(`//hn.algolia.com/api/v1/search?query=${query}`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <QueryForm handleSubmit={handleSubmit} />\r\n      {isError && <div>加载数据失败</div>}\r\n      {isLoading ? <LoadingIndicator /> : <ArticleList articles={data.hits} />}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}